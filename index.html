<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EcoAlertas</title>
  <meta name="description" content="EcoAlertas: reportá problemas urbanos con una foto.">
  <link rel="stylesheet" href="css/styles.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>

  <!-- Header -->
  <header>
    <div class="logo-section">
      <img src="assets/logo.png" alt="EcoAlertas Logo" class="logo"/>
      <h1>EcoAlertas</h1>
    </div>
    <div class="nav-controls">
      <button id="themeToggle" class="btn-outline"><i class="fas fa-moon"></i></button>
      <button id="loginBtn" class="btn-outline"><i class="fas fa-user"></i> Iniciar Sesión</button>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <h2>Cuida tu ciudad con una foto</h2>
      <p>Reportá basura, baches, cables rotos, aguas servidas y más.</p>
      <a href="#registro" class="btn"><i class="fas fa-rocket"></i> Únete ahora</a>
    </div>
  </section>

  <!-- Métricas -->
  <section class="metrics container">
    <div class="card">
      <h2>3500+</h2>
      <p>Alertas enviadas</p>
    </div>
    <div class="card">
      <h2>12</h2>
      <p>Municipios activos</p>
    </div>
    <div class="card">
      <h2>4.8/5</h2>
      <p>Usuarios satisfechos</p>
    </div>
  </section>

  <!-- Cómo funciona -->
  <section class="container section">
    <h2>¿Cómo funciona?</h2>
    <div class="metrics">
      <div class="card">
        <h3>📸 Capturá</h3>
        <p>Fotografiá el problema urbano</p>
      </div>
      <div class="card">
        <h3>📍 Geoetiquetá</h3>
        <p>Tu celular agrega la ubicación</p>
      </div>
      <div class="card">
        <h3>🚀 Reportá</h3>
        <p>La alerta llega a las autoridades</p>
      </div>
    </div>
  </section>

  <!-- Newsletter -->
  <section id="registro" class="container section">
    <h2>Suscribite al Newsletter</h2>
    <form id="newsletterForm">
      <input type="email" name="email" placeholder="Tu correo" required />
      <button type="submit" class="btn">Enviar</button>
    </form>
  </section>

  <!-- Footer -->
  <footer class="container">
    <p>EcoAlertas © 2025 • <a href="#">Privacidad</a> • <a href="#">Términos</a></p>
  </footer>

  <!-- Login Modal -->
  <div class="modal" id="loginModal">
    <div class="modal-content">
      <h2>Iniciar Sesión</h2>
      <form id="loginForm">
        <input type="email" id="email" name="email" placeholder="Correo electrónico" required />
        <input type="password" id="password" name="password" placeholder="Contraseña" required />
        <button type="submit" class="btn">
          <span class="btn-text">Iniciar Sesión</span>
          <div class="loading-spinner hidden"></div>
        </button>
      </form>
      <p><a href="#" onclick="showNotification('Función no disponible')">¿Olvidaste tu contraseña?</a></p>
    </div>
  </div>

  <!-- Notification -->
  <div class="notification" id="notification">
    <span id="notificationText"></span>
  </div>

  <!-- Firebase + Scripts -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="js/firebase-config.js"></script>
  <script>
    // Login handling
    const loginModal = document.getElementById('loginModal');
    const loginBtn = document.getElementById('loginBtn');
    const closeModal = () => loginModal.classList.remove('active');
    const openModal = () => loginModal.classList.add('active');

    loginBtn.addEventListener('click', openModal);

    document.getElementById('loginForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const email = e.target.email.value;
      const password = e.target.password.value;
      const spinner = e.target.querySelector('.loading-spinner');
      const text = e.target.querySelector('.btn-text');

      spinner.classList.remove('hidden');
      text.textContent = 'Iniciando...';

      auth.signInWithEmailAndPassword(email, password)
        .then(() => {
          window.location.href = 'dashboard.html';
        })
        .catch(err => {
          showNotification('Error: ' + err.message);
        })
        .finally(() => {
          spinner.classList.add('hidden');
          text.textContent = 'Iniciar Sesión';
        });
    });

    // Notifications
    function showNotification(msg) {
      const n = document.getElementById('notification');
      const t = document.getElementById('notificationText');
      t.textContent = msg;
      n.style.display = 'block';
      setTimeout(() => n.style.display = 'none', 4000);
    }

    // Newsletter (simulado)
    document.getElementById('newsletterForm').addEventListener('submit', function (e) {
      e.preventDefault();
      showNotification('Gracias por suscribirte.');
      this.reset();
    });

    // Theme toggle
    document.getElementById('themeToggle').addEventListener('click', () => {
      const isDark = document.body.getAttribute('data-theme') === 'dark';
      document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
    });
  </script>
</body>
</html>
